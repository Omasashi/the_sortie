{% extends ('layout.html.twig') %}
 {% block title %}{{ parent() }} home{% endblock %}
{% block main %}
    <div class="marge-bottom marge-top text-white DIV container">
        <div class="TRANS marge-bottom marge-top">
            <div class="row container text-left text-white">
                <div class="marge-bottom col-md-4 offset-md-8">Date du jour : {{ date }}</div>
                <div class="marge-bottom col-md-4 offset-md-8">Paticipant : {{ user.prenom }}</div>
            </div>

            <div class="marge-bottom row container"><h4>filtrer les sorties</h4></div>
            <form action="">

                <div class="row">

                    <div class="marge-bottom col-4">
                        <div>
                            <div><label for="">Site</label></div>
                            <div><select id="pet-select">
                                    {% for  site  in sites %}
                                        <option value="{{ site.id }}">{{ site.nomSite }}</option>
                                    {% endfor %}
                                </select></div>
                        </div>
                        <div>
                            <div><label for="">Le nopm de la sortie contient</label></div>
                            <div><input name="like" type="text"></div>
                        </div>
                        <div>
                            <div><label for="">Entre</label></div><div><input type="date"></div><div><label for="">et</label></div>
                            <div><input type="date"></div>
                        </div>
                    </div>
                    <div class="marge-bottom col-4">
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="organisateur" name="organisateur">
                            <label class="custom-control-label" for="organisateur">Sortie dont je suis
                                l'organisateur</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="inscrit" name="inscrit">
                            <label class="custom-control-label" for="inscrit">Sortie auxquelles je suis
                                inscrit(e).</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="pasInscrit" name="pasInscrit">
                            <label class="custom-control-label" for="pasInscrit">Sortie auxquelles je ne suis pas
                                inscrit(e).</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="passees" name="passees">
                            <label class="custom-control-label" for="passees">Sortie passées.</label>
                        </div>
                    </div>
                    <div class="col-3"><input type="submit" class="btn btn-outline-primary " value="Rechercher"></div>
                </div>
            </form>

            <div id="table-wrapper">
                <div id="table-scroll">
                    <table class="table table-bordered table-striped">
                        <thead>
                        <tr>
                            <th scope="col">Nom de la sortie</th>
                            <th scope="col">Date de la Sortie</th>
                            <th scope="col">Clôture</th>
                            <th scope="col">inscrits/places</th>
                            <th scope="col">Etat</th>
                            <th scope="col">inscrit</th>
                            <th scope="col">Organisateur</th>
                            <th scope="col">Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for  sortie in sorties %}
                            <tr>
                                <th scope="row">{{ sortie.nom }}</th>
                                <td>{{ sortie.dateDebut |date('d/m/Y') }}</td>
                                <td>{{ sortie.dateCloture |date('d/m/Y') }}</td>
                                <td>{{ sortie.sortieIncription |length }}/{{ sortie.maxInscriptions }}</td>
                                <td>{{ sortie.sortieEtat.libelle }}</td>
                                <td> {% if sortie.sortieParticipant == (app.User) %}
                                        <h4 class="text-center"><strong> X</strong></h4>

                                    {% else %}
                                        <strong><u>Vous n'êtes pas
                                                inscris.{% if sortie.sortieIncription |length >=sortie.maxInscriptions %}
                                            {% else %} Inscrivez-vous {% endif %}</u></strong>
                                    {% endif %}</td>
                                <td>{{ sortie.sortieParticipant.pseudo }}</td>
                                <td><a href="{{ path('afficheSortie',{'id':sortie.id}) }}">Afficher
                                        <br>{% if sortie.organisateur==(app.User.id) %}<a href="">
                                            Modifer</a>{% endif %}</a></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <a href="{{ path('createSortie') }}" class="btn btn-outline-primary">Créer une sortie</a>
    </div>

{% endblock %}